// jStepper 1.5.0
!function(e){e.fn.jStepper=function(t,n,a){if(this.length>1)return this.each(function(){$(this).jStepper(t)}),this;if("string"==typeof t)return"option"===t&&(null===a&&(a=e.fn.jStepper.defaults[n]),this.data("jstepper.o")[n]=a),this;var i=e.extend({},e.fn.jStepper.defaults,t);e.metadata&&(i=e.extend({},i,this.metadata())),this.data("jstepper.o",i),i.disableAutocomplete&&this.attr("autocomplete","off"),e.isFunction(this.mousewheel)&&this.mousewheel(function(t,n){if(n>0){var a=e.Event("keydown");return a.keyCode=38,r(1,a,this),!1}if(0>n){var a=e.Event("keydown");return a.keyCode=40,r(0,a,this),!1}}),this.blur(function(){l(this,null)}),this.keydown(function(e){var t=e.keyCode;if(38===t)r(1,e,this);else if(40===t)r(0,e,this);else if("ignore"===i.overflowMode&&i.maxValue&&$(this).val().length>=i.maxValue.toString().length&&(t>=48&&57>=t||t>=96&&105>=t)&&this.selectionStart===this.selectionEnd)return!1}),this.keyup(function(e){l(this,e)});var l=function(t,n){var a=e(t),l=a.val(),r=l;i.disableNonNumeric&&(l=l.replace(/[^\d\.,\-]/gi,""));var s=!1;null!==i.maxValue&&l>i.maxValue&&(l=i.maxValue,s=!0),null!==i.minValue&&l<i.minValue&&""!=l&&(l=i.minValue,s=!0),(c(n)===!0||null===n||s===!0)&&(l=u(l)),r!=l&&a.val(l)},r=function(t,n,a){var r,u=e(a);r=n?n.ctrlKey?i.ctrlStep:n.shiftKey?i.shiftStep:i.normalStep:i.normalStep;var s=u.val(),o=s.length-a.selectionStart,f=s.length-a.selectionEnd;s=s.replace(/,/g,"."),s=s.replace(i.decimalSeparator,"."),s+="",-1!=s.indexOf(".")&&(s=s.match(new RegExp("-{0,1}[0-9]+[\\.][0-9]*"))),s+="",-1!=s.indexOf("-")&&(s=s.match(new RegExp("-{0,1}[0-9]+[\\.]*[0-9]*"))),s+="",s=s.match(new RegExp("-{0,1}[0-9]+[\\.]*[0-9]*")),(""===s||"-"==s||null===s)&&(s=i.defaultValue),s=1===t?e.fn.jStepper.AddOrSubtractTwoFloats(s,r,!0):e.fn.jStepper.AddOrSubtractTwoFloats(s,r,!1);var m=!1;return null!==i.maxValue&&s>=i.maxValue&&(s=i.maxValue,m=!0),null!==i.minValue&&s<=i.minValue&&(s=i.minValue,m=!0),s=s.toString().replace(/\./,i.decimalSeparator),u.val(s),a.selectionStart=s.length-o,a.selectionEnd=s.length-f,l(a,n),i.onStep&&i.onStep(u,t,m),!1},u=function(e){var t=e.toString();return t=s(t),t=o(t),t=f(t),t=m(t)},s=function(e){var t=e;if(i.minDecimals>0){var n;if(-1!=t.indexOf(".")){var a=t.length-(t.indexOf(".")+1);a<i.minDecimals&&(n=i.minDecimals-a)}else n=i.minDecimals,t+=".";for(var l=1;n>=l;l++)t+="0"}return t},o=function(e){var t=e;if(i.maxDecimals>0){var n=0;-1!=t.indexOf(".")&&(n=t.length-(t.indexOf(".")+1),i.maxDecimals<n&&(t=t.substring(0,t.indexOf("."))+"."+t.substring(t.indexOf(".")+1,t.indexOf(".")+1+i.maxDecimals)))}return t},f=function(e){var t=e;return i.allowDecimals||(t=t.toString().replace(i.decimalSeparator,"."),t=t.replace(new RegExp("[\\.].+"),"")),t},m=function(e){var t=e;if(null!==i.minLength){var n=t.length;-1!=t.indexOf(".")&&(n=t.indexOf("."));var a=!1;if(-1!=t.indexOf("-")&&(a=!0,t=t.replace(/-/,"")),n<i.minLength)for(var l=1;l<=i.minLength-n;l++)t="0"+t;a&&(t="-"+t)}return t},c=function(e){var t=!1;return null!==e&&(38===e.keyCode||40===e.keyCode)&&(t=!0),t};return this},e.fn.jStepper.AddOrSubtractTwoFloats=function(e,t,n){var a=e.toString(),i=t.toString(),l="";if(a.indexOf(".")>-1||i.indexOf(".")>-1){-1===a.indexOf(".")&&(a+=".0"),-1===i.indexOf(".")&&(i+=".0");for(var r=a.substr(a.indexOf(".")+1),u=i.substr(i.indexOf(".")+1),s=a.substr(0,a.indexOf(".")),o=i.substr(0,i.indexOf(".")),f=!0;f;)r.length!==u.length?r.length<u.length?r+="0":u+="0":f=!1;for(var m=r.length,c=0;c<=r.length-1;c++)s+=r.substr(c,1),o+=u.substr(c,1);var d,h=Number(s),p=Number(o);d=n?h+p:h-p;var g=!1;0>d&&(g=!0,d=Math.abs(d)),l=d.toString();for(var x=0;x<m-l.length+1;x++)l="0"+l;l.length>=m&&(l=l.substring(0,l.length-m)+"."+l.substring(l.length-m)),g===!0&&(l="-"+l)}else l=n?Number(e)+Number(t):Number(e)-Number(t);return Number(l)},e.fn.jStepper.defaults={maxValue:null,minValue:null,normalStep:1,shiftStep:5,ctrlStep:10,minLength:null,disableAutocomplete:!0,defaultValue:1,decimalSeparator:",",allowDecimals:!0,minDecimals:0,maxDecimals:null,disableNonNumeric:!0,onStep:null,overflowMode:"default"}}(jQuery);